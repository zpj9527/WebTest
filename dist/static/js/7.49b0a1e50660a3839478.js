webpackJsonp([7],{H9HI:function(e,t){},KCgK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"StoredList",data:function(){return{UrLHeader:this.api.api_pro_dev+"/v1/",memberData:{},checkdialogVisible:!1,memberData_index:"",accountList:[{accountL:"",name:"",status:"",banlance:"",avaiableBan:""}],tableData:[],currentPage:1,pagesize:10,total:0,multipleSelection:[],chargedialogVisible:!1,charge_form:{payment:"9001",amount:0,remark:"",code_type:0},exchangedialogVisible:!1,certain_member_data:null,memberList:[],statusDict:{O:"初始",E:"有效",L:"销卡",R:"挂失",B:"损坏",S:"停用",D:"休眠"},exchange_form:{code:"",amount:0,remark:"",transfer_card_id:"",code_type:2,card_no:""},confirm_index:null,searchdialogVisible:!1,freezedialogVisible:!1,consumedialogVisible:!1,consume_form:{amount:0,remark:"",code_type:1},detaildialogVisible:!1,invoiceTableData:[]}},created:function(){console.log(this.$route.query.memberData),this.$route.query.memberData&&this.$route.query.memberData.id?(this.memberData=this.$route.query.memberData,console.log(this.memberData),this.handleCurrentPageChange(1)):(this.checkdialogVisible=!0,this.get_card_list())},methods:{handleCurrentChange:function(e){console.log(e);this.memberData.card_no=e.card_no,this.memberData.id=e.id},setCurrent:function(e){this.$refs.singleTable.setCurrentRow(e)},developeMessage:function(){var e=this.$createElement;this.$notify({title:"提示",message:e("i",{style:"color: teal"},"正在马不停蹄地开发中~~~")})},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},get_memberData:function(e,t){this.memberData=e,this.memberData_index=t,console.log("单条数据",e)},get_memberData_confirm:function(){var e=this;e.memberData.card_no&&e.memberData.id?(e.checkdialogVisible=!1,e.get_certain_card_base_list(e.memberData.id),e.handleCurrentPageChange(1)):e.$confirm("是否不选协议卡进行操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.checkdialogVisible=!1}).catch(function(){})},get_certain_card_base_list:function(e){var t=this.UrLHeader+"customer/company/get_company_base_info/"+e+"/",a=this;a.$axios.get(t).then(function(e){"success"==e.data.message&&(console.log(e.data.data),a.memberData=e.data.data)}).catch(function(e){})},get_card_deposit_list:function(){var e=this,t=e.UrLHeader+"customer/company/get_company_deposit_list/";e.memberData.id&&e.$axios.post(t,{company_id:e.memberData.id}).then(function(t){console.log("储值列表",t.data),(t.data.message="success")&&(e.tableData=t.data.data.results)}).catch(function(e){})},add_card_deposit:function(){var e=this,t=e.UrLHeader+"customer/company/add_company_deposit/",a={company_id:e.memberData.id,card_no:e.memberData.card_no?e.memberData.card_no:"",iss_hotel:e.memberData.iss_hotel,payment:"9001",amount:parseFloat(e.charge_form.amount),remark:"充值 "+e.charge_form.amount,code_type:0};e.$axios.post(t,a).then(function(t){console.log("充值",t.data),(t.data.message="success")&&(e.chargedialogVisible=!1,e.$message({message:"充值成功",type:"success"}),e.get_certain_card_base_list(e.memberData.id),e.get_card_deposit_list())}).catch(function(e){})},consume_card_deposit:function(){var e=this,t=e.UrLHeader+"customer/company/add_company_deposit/",a={company_id:e.memberData.id,card_no:e.memberData.card_no?e.memberData.card_no:"",iss_hotel:e.memberData.iss_hotel,payment:"9001",amount:-parseFloat(e.consume_form.amount),remark:"消费 "+e.consume_form.amount,code_type:1};e.memberData.money_pay-e.memberData.money_charge-e.memberData.money_freeze>parseFloat(e.consume_form.amount)&&e.$axios.post(t,a).then(function(t){console.log("消费",t.data),(t.data.message="success")&&(e.consumedialogVisible=!1,e.$message({message:"消费成功",type:"success"}),e.get_certain_card_base_list(e.memberData.id),e.get_card_deposit_list())}).catch(function(e){})},exchange_card_deposit:function(){var e=this,t=e.UrLHeader+"customer/company/add_company_deposit/",a={company_id:e.memberData.id,card_no:e.memberData.card_no?e.memberData.card_no:"",iss_hotel:e.memberData.iss_hotel,payment:"9001",amount:parseFloat(e.exchange_form.amount),remark:"转账"+e.exchange_form.amount,transfer_card_id:e.exchange_form.transfer_card_id,code_type:2};console.log(e.memberData.iss_hotel),e.memberData.money_pay-e.memberData.money_charge-e.memberData.money_freeze>parseFloat(e.consume_form.amount)?(console.log(e.exchange_form),e.exchange_form.transfer_card_id?e.$axios.post(t,a).then(function(t){console.log("转账",t.data),(t.data.message="success")&&(e.exchangedialogVisible=!1,e.$message({message:"转账成功",type:"success"}),e.get_certain_card_base_list(e.memberData.id),e.get_card_deposit_list())}).catch(function(e){}):e.$message({message:"请选择输入卡的卡号",type:"info"})):e.$message.error("可用余额不足!")},get_card_list:function(){var e=this.UrLHeader+"customer/company/get_company_base_list/?page=1&page_size=100",t=this;t.$axios.get(e).then(function(e){console.log("协议列表",e.data.data),"success"==e.data.message&&e.data.data.results.length&&(t.memberList=e.data.data.results,t.setCurrent(e.data.data.results[0]))}).catch(function(e){})},get_certain_member:function(e,t){this.certain_member_data=e,this.confirm_index=t},check_card_confirm:function(){var e=this;console.log(e.certain_member_data),e.certain_member_data.card_no&&e.certain_member_data.id?(e.searchdialogVisible=!1,e.exchange_form.card_no=e.certain_member_data.card_no?e.certain_member_data.card_no:"",e.exchange_form.card_name=e.certain_member_data.name,e.exchange_form.transfer_card_id=e.certain_member_data.id):e.$confirm("是否取消转移?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.searchdialogVisible=!1}).catch(function(){})},get_card_invoice_detail_list:function(){var e=this,t=e.UrLHeader+"customer/company/get_company_invoice_detail_list/?page_size=30";e.detaildialogVisible=!0,e.$axios.post(t,{company_id:e.memberData.id}).then(function(t){console.log("发票明细列表",t.data.data),(t.data.message="success")&&(e.invoiceTableData=t.data.data.results)}).catch(function(e){})},handleCurrentPageChange:function(e){var t=this,a=t.UrLHeader+"customer/company/get_company_deposit_list/?page="+e+"&page_size=10",i={company_id:t.memberData.id};t.$axios.post(a,i).then(function(e){console.log("储值列表",e.data),(e.data.message="success")&&(t.$message({message:"获取数据成功",type:"success"}),t.tableData=e.data.data.results,t.total=e.data.data.count)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"storedList"},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.checkdialogVisible=!0}}},[e._v("切换协议单位")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.developeMessage()}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.chargedialogVisible=!0}}},[e._v("充值")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.developeMessage()}}},[e._v("扫码支付")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.consumedialogVisible=!0}}},[e._v("消费")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.developeMessage()}}},[e._v("冻结")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.exchangedialogVisible=!0}}},[e._v("转账")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.developeMessage()}}},[e._v("打印账单")]),e._v(" "),a("div",{staticClass:"pull-right"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.get_card_invoice_detail_list()}}},[e._v("发票")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleCurrentPageChange(1)}}},[e._v("刷新")])],1)],1),e._v(" "),a("div",{staticClass:"mid_section"},[a("div",{staticClass:"pull-left mid_left"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.accountList,height:"300",border:"","header-cell-style":{background:"#68819E",color:"#fff"}}},[a("el-table-column",{attrs:{prop:"account",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"banlance",label:"余额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avaiableBan",label:"可用余额(次)"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"pull-right mid_right"},[a("div",{staticClass:"inputItems"},[a("p",[e._v("卡号：")]),e._v(" "),e.memberData.card_no?a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容",disabled:""},model:{value:e.memberData.card_no,callback:function(t){e.$set(e.memberData,"card_no",t)},expression:" memberData.card_no "}}):a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},on:{focus:function(t){e.checkdialogVisible=!0}}})],1),e._v(" "),a("div",{staticClass:"inputItems"},[a("p",[e._v("持卡人：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.memberData.name,callback:function(t){e.$set(e.memberData,"name",t)},expression:" memberData.name "}})],1),e._v(" "),a("div",{staticClass:"inputItems"},[a("p",[e._v("协议计划：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.memberData.card_type,callback:function(t){e.$set(e.memberData,"card_type",t)},expression:" memberData.card_type "}})],1),e._v(" "),a("div",{staticClass:"inputItems"},[a("p",[e._v("协议等级：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.memberData.card_level,callback:function(t){e.$set(e.memberData,"card_level",t)},expression:" memberData.card_level "}})],1),e._v(" "),a("div",{staticClass:"inputItems"},[a("p",[e._v("状态：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.memberData.status,callback:function(t){e.$set(e.memberData,"status",t)},expression:" memberData.status "}})],1),e._v(" "),a("div",{staticClass:"inputItems"},[a("p",[e._v("酒店：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.memberData.iss_hotel,callback:function(t){e.$set(e.memberData,"iss_hotel",t)},expression:" memberData.iss_hotel "}})],1),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"inputItems"},[a("p",[e._v("缴费总额：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.memberData.money_payment,callback:function(t){e.$set(e.memberData,"money_payment",t)},expression:" memberData.money_payment "}})],1),e._v(" "),a("div",{staticClass:"inputItems"},[a("p",[e._v("开票总额：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.memberData.money_invoice,callback:function(t){e.$set(e.memberData,"money_invoice",t)},expression:" memberData.money_invoice "}})],1),e._v(" "),a("div",{staticClass:"inputItems"},[a("p",[e._v("未开金额：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{value:e.memberData.money_payment-e.memberData.money_invoice,size:"mini",placeholder:"请输入内容"}})],1),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"inputItems"},[a("p",[e._v("信用：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.memberData.credit,callback:function(t){e.$set(e.memberData,"credit",t)},expression:" memberData.credit "}})],1),e._v(" "),a("div",{staticClass:"inputItems"},[a("p",[e._v("冻结：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.memberData.money_freeze,callback:function(t){e.$set(e.memberData,"money_freeze",t)},expression:" memberData.money_freeze "}})],1),e._v(" "),a("div",{staticClass:"inputItems"},[a("p",[e._v("可用余额：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",value:e.memberData.money_pay-e.memberData.money_charge-e.memberData.money_freeze}})],1),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"inputItems",staticStyle:{width:"72%"}},[a("p",{staticStyle:{width:"12%"}},[e._v("备注：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},size:"mini",placeholder:"请输入内容",resize:"none"},model:{value:e.memberData.remark,callback:function(t){e.$set(e.memberData,"remark",t)},expression:" memberData.remark "}})],1)])]),e._v(" "),a("div",{staticClass:"bot_section"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",border:"",height:"400","header-cell-style":{background:"#68819E",color:"#fff"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"流水号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"iss_hotel",label:"酒店"}}),e._v(" "),a("el-table-column",{attrs:{prop:"biz_date",label:"营业日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payment",label:"项目"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payment",label:"项目-EN"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.amount<0?a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.amount))]):a("span",{staticStyle:{color:"green"}},[e._v(" "+e._s(t.row.amount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"余额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"transfer_card_id",label:"转账"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_user",label:"工号"}}),e._v(" "),a("el-table-column",{staticStyle:{width:"200px"},attrs:{prop:"create_datetime",label:"时间"}}),e._v(" "),a("el-table-column",{staticStyle:{width:"200px"},attrs:{prop:"remark",label:"备注"}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pagesize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentPageChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"协议选择",visible:e.checkdialogVisible,width:"80%"},on:{"update:visible":function(t){e.checkdialogVisible=t}}},[a("div",{staticClass:"charge_detail"},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{border:"",data:e.memberList,"highlight-current-row":"","header-cell-style":{background:"#303A41",color:"white",textAlign:"center"},"cell-style":{textAlign:"center",color:"#333333"},height:"460",size:"mini"},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{property:"id",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{property:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{property:"card_no",label:"卡号"}}),e._v(" "),a("el-table-column",{attrs:{property:"card_type",label:"协议单位计划"}}),e._v(" "),a("el-table-column",{attrs:{property:"card_level",label:"协议单位等级"}}),e._v(" "),a("el-table-column",{attrs:{property:"phone",label:"手机"}}),e._v(" "),a("el-table-column",{attrs:{property:"email",label:"Email"}}),e._v(" "),a("el-table-column",{attrs:{property:"point_pay",label:"积分累计"}}),e._v(" "),a("el-table-column",{attrs:{property:"point_charge",label:"积分消耗"}}),e._v(" "),a("el-table-column",{attrs:{property:"address",label:"积分余额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.point_pay-t.row.point_charge))])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"money_pay",label:"付费"}}),e._v(" "),a("el-table-column",{attrs:{property:"money_charge",label:"消费"}}),e._v(" "),a("el-table-column",{attrs:{property:"address",label:"储值余额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.money_pay-t.row.money_charge-t.row.money_freeze))])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"credit",label:"信用"}}),e._v(" "),a("el-table-column",{attrs:{property:"date_end",label:"有效期"}}),e._v(" "),a("el-table-column",{attrs:{property:"status_desc",label:"卡状态"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"pull-left"},[e._v("记录总数： "+e._s(e.memberList.length))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.get_memberData_confirm()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"储值卡充值",visible:e.chargedialogVisible,width:"40%"},on:{"update:visible":function(t){e.chargedialogVisible=t}}},[a("div",{staticClass:"charge_detail"},[a("div",{staticClass:"charge_left pull-left"},[a("div",{staticClass:"Items"},[a("p",[e._v("卡号：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.memberData.card_no,callback:function(t){e.$set(e.memberData,"card_no",t)},expression:" memberData.card_no "}})],1),e._v(" "),a("div",{staticClass:"Items"},[a("p"),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{type:"textarea",size:"mini",resize:"none",value:"单位名称："+e.memberData.name,autosize:{minRows:4,maxRows:6}}})],1)]),e._v(" "),a("div",{staticClass:"charge_right pull-right"},[a("div",{staticClass:"Items"},[a("p",[e._v("付款方式：")]),e._v(" "),a("el-input",{staticStyle:{width:"80%"},attrs:{size:"mini",value:"9001"}})],1),e._v(" "),a("div",{staticClass:"Items"},[a("p",[e._v("充值金额：")]),e._v(" "),a("el-input",{staticStyle:{width:"80%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.charge_form.amount,callback:function(t){e.$set(e.charge_form,"amount",t)},expression:"charge_form.amount"}})],1)]),e._v(" "),a("div",{staticClass:"remark pull-left"},[a("p",[e._v("摘要：")]),e._v(" "),a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini",type:"textarea",placeholder:"请输入内容",resize:"none",autosize:{minRows:6}},model:{value:e.charge_form.remark,callback:function(t){e.$set(e.charge_form,"remark",t)},expression:"charge_form.remark"}})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.chargedialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.add_card_deposit()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"消费",visible:e.consumedialogVisible,width:"40%"},on:{"update:visible":function(t){e.consumedialogVisible=t}}},[a("div",{staticClass:"charge_detail"},[a("div",{staticClass:"charge_left pull-left"},[a("div",{staticClass:"Items"},[a("p",[e._v("卡号：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.memberData.card_no,callback:function(t){e.$set(e.memberData,"card_no",t)},expression:" memberData.card_no "}})],1),e._v(" "),a("div",{staticClass:"Items"},[a("p"),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{type:"textarea",size:"mini",resize:"none",value:"单位名称："+e.memberData.name,autosize:{minRows:4,maxRows:6}}})],1)]),e._v(" "),a("div",{staticClass:"charge_right pull-right"},[a("div",{staticClass:"Items"},[a("p",[e._v("付款方式：")]),e._v(" "),a("el-input",{staticStyle:{width:"80%"},attrs:{size:"mini",value:"9001"}})],1),e._v(" "),a("div",{staticClass:"Items"},[a("p",[e._v("消费金额：")]),e._v(" "),a("el-input",{staticStyle:{width:"80%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.consume_form.amount,callback:function(t){e.$set(e.consume_form,"amount",t)},expression:"consume_form.amount"}})],1)]),e._v(" "),a("div",{staticClass:"remark pull-left"},[a("p",[e._v("摘要：")]),e._v(" "),a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini",type:"textarea",placeholder:"请输入内容",resize:"none",autosize:{minRows:6}},model:{value:e.consume_form.remark,callback:function(t){e.$set(e.consume_form,"remark",t)},expression:"consume_form.remark"}})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.consumedialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.consume_card_deposit()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"储值卡冻结明细",visible:e.freezedialogVisible,width:"70%"},on:{"update:visible":function(t){e.freezedialogVisible=t}}},[a("div",{staticClass:"charge_detail"},[a("div",{staticClass:"freeze  pull-left"},[a("div",{staticClass:"Items"},[a("p",[e._v("卡号：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.memberData.card_no,callback:function(t){e.$set(e.memberData,"card_no",t)},expression:" memberData.card_no "}})],1),e._v(" "),a("div",{staticClass:"Items"},[a("p",[e._v("单位名称：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.memberData.name,callback:function(t){e.$set(e.memberData,"name",t)},expression:" memberData.name "}})],1),e._v(" "),a("div",{staticClass:"Items"},[a("p",[e._v("有效期：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.memberData.biz_date,callback:function(t){e.$set(e.memberData,"biz_date",t)},expression:" memberData.biz_date "}})],1),e._v(" "),a("div",{staticClass:"Items"},[a("p",[e._v("单号：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"}})],1),e._v(" "),a("div",{staticClass:"Items"},[a("p",[e._v("金额：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"}})],1),e._v(" "),a("div",{staticClass:"Items"},[a("p",[e._v("打印冻结单：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"}})],1)]),e._v(" "),a("div",{staticClass:"remark pull-left"},[a("p",[e._v("备注：")]),e._v(" "),a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini",type:"textarea",placeholder:"请输入内容",resize:"none",autosize:{minRows:6}}})],1),e._v(" "),a("div",{staticClass:"pull-left",staticStyle:{width:"100%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",border:"",height:"300","header-cell-style":{background:"#68819E",color:"#fff"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"id",label:"酒店"}}),e._v(" "),a("el-table-column",{attrs:{prop:"iss_hotel",label:"来源"}}),e._v(" "),a("el-table-column",{attrs:{prop:"biz_date",label:"房号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payment",label:"前台账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payment",label:"账单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.amount<0?a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.amount))]):a("span",{staticStyle:{color:"green"}},[e._v(" "+e._s(t.row.amount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"余额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"transfer_card_id",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_user",label:"失效日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_datetime",label:"冻结日期",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:"180"}})],1)],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.freezedialogVisible=!1}}},[e._v("退 出")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.freezedialogVisible=!1}}},[e._v("打 印")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.freezedialogVisible=!1}}},[e._v("刷 新")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.freezedialogVisible=!1}}},[e._v("解 冻")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.freezedialogVisible=!1}}},[e._v("冻 结")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"储值转移明细",visible:e.exchangedialogVisible,width:"50%"},on:{"update:visible":function(t){e.exchangedialogVisible=t}}},[a("div",{staticClass:"charge_detail"},[a("div",{staticClass:"charge_left pull-left",staticStyle:{width:"33%"}},[a("div",{staticClass:"Items"},[a("p",[e._v("卡号：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.memberData.card_no,callback:function(t){e.$set(e.memberData,"card_no",t)},expression:" memberData.card_no "}})],1),e._v(" "),a("div",{staticClass:"Items"},[a("p"),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{type:"textarea",size:"mini",resize:"none",value:"单位名称"+e.memberData.name,autosize:{minRows:4,maxRows:6}}})],1)]),e._v(" "),a("div",{staticClass:"charge_left pull-left",staticStyle:{width:"33%"}},[a("div",{staticClass:"Items",staticStyle:{"text-align":"center"}},[a("p",{staticClass:"el-icon-arrow-right"})]),e._v(" "),a("div",{staticClass:"Items"},[a("p",[e._v("代码：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.exchange_form.code,callback:function(t){e.$set(e.exchange_form,"code",t)},expression:" exchange_form.code "}})],1),e._v(" "),a("div",{staticClass:"Items"},[a("p",[e._v("金额：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.exchange_form.amount,callback:function(t){e.$set(e.exchange_form,"amount",t)},expression:" exchange_form.amount "}})],1)]),e._v(" "),a("div",{staticClass:"charge_left pull-right",staticStyle:{width:"33%"}},[a("div",{staticClass:"Items"},[a("p",[e._v("输入卡：")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入内容"},on:{focus:function(t){e.searchdialogVisible=!0}},model:{value:e.exchange_form.card_no,callback:function(t){e.$set(e.exchange_form,"card_no",t)},expression:" exchange_form.card_no "}})],1),e._v(" "),a("div",{staticClass:"Items"},[a("p"),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{type:"textarea",size:"mini",resize:"none",value:"单位名称："+e.exchange_form.card_name,autosize:{minRows:4,maxRows:6}}})],1)]),e._v(" "),a("div",{staticClass:"remark pull-left"},[a("p",[e._v("摘要：")]),e._v(" "),a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini",type:"textarea",placeholder:"请输入内容",resize:"none",autosize:{minRows:6}}})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.exchangedialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.exchangedialogVisible=!1}}},[e._v("重 置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.exchange_card_deposit()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"协议单位查询",visible:e.searchdialogVisible,width:"70%"},on:{"update:visible":function(t){e.searchdialogVisible=t}}},[a("div",{staticClass:"charge_detail"},[a("div",{},[a("div",{staticClass:"Items"},[a("p",[e._v("智能搜索：")]),e._v(" "),a("el-input",{staticStyle:{width:"40%"},attrs:{size:"mini",placeholder:"请输入内容"}}),e._v(" "),a("el-button",{staticClass:"pull-right",attrs:{type:"primary"},on:{click:function(t){e.searchdialogVisible=!1}}},[e._v("读 卡")]),e._v(" "),a("span",{staticClass:"pull-right"},[e._v("  ")]),e._v(" "),a("el-button",{staticClass:"pull-right",attrs:{type:"primary"},on:{click:function(t){e.searchdialogVisible=!1}}},[e._v("查 询")])],1)]),e._v(" "),a("div",{staticClass:"table",staticStyle:{width:"100%"}},[a("table",[a("thead",[a("tr",[a("th",[e._v("编号")]),e._v(" "),a("th",[e._v("单位名称")]),e._v(" "),a("th",[e._v("卡号")]),e._v(" "),a("th",[e._v("协议单位计划")]),e._v(" "),a("th",[e._v("协议单位等级")]),e._v(" "),a("th",[e._v("手机")]),e._v(" "),a("th",[e._v("Email")]),e._v(" "),a("th",[e._v("积分累计")]),e._v(" "),a("th",[e._v("积分消耗")]),e._v(" "),a("th",[e._v("积分余额")]),e._v(" "),a("th",[e._v("付款")]),e._v(" "),a("th",[e._v("消费")]),e._v(" "),a("th",[e._v("余额")]),e._v(" "),a("th",[e._v("信用")]),e._v(" "),a("th",[e._v("有效期")]),e._v(" "),a("th",[e._v("卡状态")])])]),e._v(" "),a("tbody",e._l(e.memberList,function(t,i){return a("tr",{key:i,style:{"background-color":i==e.confirm_index?"#bbbbbb":""},on:{click:function(a){e.get_certain_member(t,i)},dblclick:function(t){e.check_card_confirm()}}},[a("td",[e._v(e._s(t.id))]),e._v(" "),a("td",[e._v(e._s(t.name))]),e._v(" "),a("td",[t.card_no?a("span",[e._v(e._s(t.card_no))]):e._e()]),e._v(" "),a("td",[e._v(e._s(t.card_type))]),e._v(" "),a("td",[e._v(e._s(t.card_level))]),e._v(" "),a("td",[e._v(e._s(t.phone))]),e._v(" "),a("td",[e._v(e._s(t.email))]),e._v(" "),a("td",[e._v(e._s(t.point_pay))]),e._v(" "),a("td",[e._v(e._s(t.point_charge))]),e._v(" "),a("td",[e._v(e._s(t.point_pay-t.point_charge))]),e._v(" "),a("td",[e._v(e._s(t.money_pay))]),e._v(" "),a("td",[e._v(e._s(t.money_charge))]),e._v(" "),a("td",[e._v(e._s(t.money_pay-t.money_charge-t.money_freeze))]),e._v(" "),a("td",[e._v(e._s(t.credit))]),e._v(" "),a("td",[e._v(e._s(t.date_end))]),e._v(" "),a("td",[e._v(e._s(e.statusDict[t.status]))])])}),0)]),e._v(" "),0==e.memberList.length?a("p",{staticStyle:{padding:"20px 0","text-align":"center"}},[e._v("当前暂无数据")]):e._e()])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"pull-left"},[e._v("记录总数： 0.00")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.searchdialogVisible=!1}}},[e._v("打卡主单")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.searchdialogVisible=!1}}},[e._v("预 订")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.check_card_confirm()}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.searchdialogVisible=!1}}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"储值卡发票明细",visible:e.detaildialogVisible,width:"70%"},on:{"update:visible":function(t){e.detaildialogVisible=t}}},[a("div",{staticClass:"charge_detail"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.invoiceTableData,"tooltip-effect":"dark",border:"",height:"300","header-cell-style":{background:"#68819E",color:"#fff"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"card_no",label:"协议卡号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"invoice_type",label:"发票类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.invoice_type?a("span",[e._v("增值税专用发票")]):a("span",[e._v("普通发票")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"invoice_number",label:"发票号码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"invoice_title",label:"发票抬头"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"开票金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_user",label:"创建人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_datetime",label:"创建日期"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"pull-left"},[a("span",[e._v("开票总额： 0.00    缴费总额： 0.00   余额： 1200.00    显示作废记录 0.00")])]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.detaildialogVisible=!1}}},[e._v("关 闭")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.detaildialogVisible=!1}}},[e._v("作 废")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.detaildialogVisible=!1}}},[e._v("新 建")])],1)])],1)},staticRenderFns:[]};var s=a("VU/8")(i,l,!1,function(e){a("ZCHb"),a("H9HI")},"data-v-793e6e7d",null);t.default=s.exports},ZCHb:function(e,t){}});