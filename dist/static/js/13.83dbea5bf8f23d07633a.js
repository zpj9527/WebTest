webpackJsonp([13],{"5EAq":function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l={name:"buroomsetting",data:function(){return{url:this.api.api_9530_9503,title:"",site_list:[],dialogVisible_siteIncident:!1,mark:!1,id:"",status_list:[{value:0,label:"空闲"},{value:1,label:"维修"},{value:2,label:"担保"},{value:3,label:"自用"},{value:4,label:"不确定"}],param:{hall_name:"",code:"",descript:"",descript_en:"",is_halt:"",list_order:"",length:"",width:"",height:"",max_capacity:"",position:"",plan:"",remark:"",status:"",meeting:""}}},created:function(){this.getSite()},methods:{flush:function(){this.mark=!0,this.param={hall_name:"",code:"",descript:"",descript_en:"",is_halt:"0",list_order:"",length:"",width:"",height:"",max_capacity:"",position:"",plan:"",remark:"",status:0,meeting:""}},getSite:function(){var a=this;a.$axios({url:a.url+"/v1/meeting/hall/list",method:"get",params:{page_size:999}}).then(function(e){"success"===e.data.message&&(console.log(e),a.site_list=e.data.data.list)}).catch(function(e){a.hintInfo("warning","获取场地失败"+e)})},add_site:function(){this.title="新增",this.flush(),this.dialogVisible_siteIncident=!0},handleAvatarSuccess:function(a,e){this.imageUrl=URL.createObjectURL(e.raw),console.log(e),console.log(this.imageUrl),this.param.plan=e.response.complete,"success"===e.response.message?this.hintInfo("success","上传图片成功"):this.hintInfo("warning","上传图片失败")},beforeAvatarUpload:function(a){console.log(a);var e="image/jpeg"===a.type||"image/png",t=a.size/1024/1024<2;return e||this.$message.error("上传图片只能是 JPG 或PNG 格式!"),t||this.$message.error("上传图片大小不能超过 2MB!"),e&&t},amendSite:function(a,e){this.mark=!1,this.id=a.id,this.title="修改",this.dialogVisible_siteIncident=!0,this.param={hall_name:a.hall_name,code:a.code,descript:a.descript,descript_en:a.descript_en,is_halt:a.is_halt+"",list_order:a.list_order,length:a.length,width:a.width,height:a.height,max_capacity:a.max_capacity,position:a.position,plan:a.plan,remark:a.remark,status:a.status,meeting:a.meeting}},confirmSite:function(){var a=this,e=this;if(console.log(e.param.hall_name,e.param.max_capacity,e.param.position,e.param.code),""===e.param.hall_name||""===e.param.max_capacity||""===e.param.position||""===e.param.code)e.hintInfo("warning","*为必填项");else{console.log(e.mark);var t=e.mark?e.url+"/v1/meeting/hall/add":e.url+"/v1/meeting/hall/update/"+e.id;e.$axios({url:t,method:"post",data:{hall_name:e.param.hall_name,code:e.param.code,descript:e.param.descript,descript_en:e.param.descript_en,is_halt:e.param.is_halt,list_order:e.param.list_order,length:e.param.length,width:e.param.width,height:e.param.height,max_capacity:e.param.max_capacity,position:e.param.position,plan:e.param.plan,remark:e.param.remark,status:e.param.status,meeting:e.param.meeting}}).then(function(a){"success"===a.data.message&&(console.log(a),e.hintInfo("success","成功"),e.dialogVisible_siteIncident=!1,e.getSite())}).catch(function(e){a.hintInfo("warning","失败"+e)})}},removeSite:function(a,e,t,l){var s=this;s.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.$axios({url:s.url+"/v1/meeting/hall/delete/"+e,method:"post"}).then(function(a){"success"===a.data.message&&(s.$message({type:"success",message:"删除成功!"}),s.getSite())}).catch(function(a){s.hintInfo("warning","失败"+a)})}).catch(function(){s.$message({type:"info",message:"已取消删除"})})},hintInfo:function(a,e){"success"===a?this.$message({message:e,showClose:!0,type:"success"}):"warning"===a?this.$message({message:e,showClose:!0,type:"warning"}):this.$message.error("出错了！")}}},s={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"global-sty"},[t("ul",{staticClass:"head"},[t("li",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:a.add_site}},[a._v("新增")])],1)]),a._v(" "),t("div",{staticClass:"site",staticStyle:{overflow:"hidden"}},[t("el-table",{attrs:{data:a.site_list,size:"mini","header-cell-style":{background:"#303A41",color:"white",textAlign:"center"},"cell-style":{textAlign:"center",color:"#333333"},height:"700"}},[t("el-table-column",{attrs:{prop:"hall_name",label:"场地名称"}}),a._v(" "),t("el-table-column",{attrs:{prop:"code",label:"代码"}}),a._v(" "),t("el-table-column",{attrs:{prop:"descript",label:"中文描述"}}),a._v(" "),t("el-table-column",{attrs:{prop:"max_capacity",label:"最大容纳的桌数"}}),a._v(" "),t("el-table-column",{attrs:{prop:"position",label:"会场的位置"}}),a._v(" "),t("el-table-column",{attrs:{prop:"plan",label:"会场图"},scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-popover",{attrs:{placement:"right",trigger:"hover"}},[t("img",{attrs:{src:e.row.plan}}),a._v(" "),t("img",{staticStyle:{"max-height":"50px","max-width":"150px"},attrs:{slot:"reference",src:e.row.plan},slot:"reference"})])]}}])}),a._v(" "),t("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:a._u([{key:"default",fn:function(e){return[0===e.row.status?t("span",[a._v("空闲")]):1===e.row.status?t("span",[a._v("维修")]):2===e.row.status?t("span",[a._v("担保")]):3===e.row.status?t("span",[a._v("自用")]):4===e.row.status?t("span",[a._v("其它")]):a._e()]}}])}),a._v(" "),t("el-table-column",{attrs:{label:"操作",width:"220px"},scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){a.removeSite(e.row,e.row.id,e.$index,a.site_list)}}},[a._v("删除")]),a._v(" "),t("el-button",{attrs:{size:"mini",type:"warning",plain:""},on:{click:function(t){a.amendSite(e.row,e.$index)}}},[a._v("修改")])]}}])})],1)],1),a._v(" "),t("el-dialog",{attrs:{visible:a.dialogVisible_siteIncident,"close-on-click-modal":!1,width:"46%"},on:{"update:visible":function(e){a.dialogVisible_siteIncident=e}}},[t("div",{staticClass:"dialog_style_header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"dialog_style_title-name"},[a._v(a._s(a.title))])]),a._v(" "),t("ul",{staticClass:"dialog_style"},[t("li",[t("span",[t("i",{staticStyle:{color:"red","font-size":"18px"}},[a._v("*")]),a._v("会场名称：\n        ")]),a._v(" "),t("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:a.param.hall_name,callback:function(e){a.$set(a.param,"hall_name",e)},expression:"param.hall_name"}})],1),a._v(" "),t("li",[t("span",[t("i",{staticStyle:{color:"red","font-size":"18px"}},[a._v("*")]),a._v("代码：\n        ")]),a._v(" "),t("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:a.param.code,callback:function(e){a.$set(a.param,"code",e)},expression:"param.code"}})],1),a._v(" "),t("li",[t("span",[a._v("中文描述：")]),a._v(" "),t("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:a.param.descript,callback:function(e){a.$set(a.param,"descript",e)},expression:"param.descript"}})],1),a._v(" "),t("li",[t("span",[a._v("英文描述：")]),a._v(" "),t("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:a.param.descript_en,callback:function(e){a.$set(a.param,"descript_en",e)},expression:"param.descript_en"}})],1),a._v(" "),t("li",[t("span",[a._v("排序：")]),a._v(" "),t("el-input",{attrs:{placeholder:"请输入内容",size:"small",type:"text",onkeyup:"value=(parseInt((value=value.replace(/\\D/g,''))==''||parseInt((value=value.replace(/\\D/g,''))==0)?'1':value,10))",onafterpaste:"value=(parseInt((value=value.replace(/\\D/g,''))==''||parseInt((value=value.replace(/\\D/g,''))==0)?'1':value,10))"},model:{value:a.param.list_order,callback:function(e){a.$set(a.param,"list_order",e)},expression:"param.list_order"}})],1),a._v(" "),t("li",[t("span",[a._v("会场长度：")]),a._v(" "),t("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:a.param.length,callback:function(e){a.$set(a.param,"length",e)},expression:"param.length"}})],1),a._v(" "),t("li",[t("span",[a._v("会场宽度：")]),a._v(" "),t("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:a.param.width,callback:function(e){a.$set(a.param,"width",e)},expression:"param.width"}})],1),a._v(" "),t("li",[t("span",[a._v("会场高度：")]),a._v(" "),t("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:a.param.height,callback:function(e){a.$set(a.param,"height",e)},expression:"param.height"}})],1),a._v(" "),t("li",[t("span",[t("i",{staticStyle:{color:"red","font-size":"18px"}},[a._v("*")]),a._v("最大容纳桌数：\n        ")]),a._v(" "),t("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:a.param.max_capacity,callback:function(e){a.$set(a.param,"max_capacity",e)},expression:"param.max_capacity"}})],1),a._v(" "),t("li",[t("span",{staticStyle:{"vertical-align":"top"}},[t("i",{staticStyle:{color:"red","font-size":"18px"}},[a._v("*")]),a._v("会场位置：\n        ")]),a._v(" "),t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:a.param.position,callback:function(e){a.$set(a.param,"position",e)},expression:"param.position"}})],1),a._v(" "),t("li",[t("span",{staticStyle:{"vertical-align":"top"}},[a._v("状态：")]),a._v(" "),t("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择",size:"small"},model:{value:a.param.status,callback:function(e){a.$set(a.param,"status",e)},expression:"param.status"}},a._l(a.status_list,function(a){return t("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})}),1)],1),a._v(" "),t("li",[t("span",{staticStyle:{"vertical-align":"top"}},[a._v("备注：")]),a._v(" "),t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:a.param.remark,callback:function(e){a.$set(a.param,"remark",e)},expression:"param.remark"}})],1),a._v(" "),t("li",[t("span",{staticStyle:{"vertical-align":"top"}},[a._v("平面图：")]),a._v(" "),t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://oss.crowncrystalhotel.com/resource/site/upload","show-file-list":!1,"on-success":a.handleAvatarSuccess,"before-upload":a.beforeAvatarUpload}},[a.param.plan?t("img",{staticClass:"avatar",attrs:{src:a.param.plan}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a._v(" "),t("li",[t("span",[a._v("是否停用：")]),a._v(" "),t("el-radio",{attrs:{label:"0"},model:{value:a.param.is_halt,callback:function(e){a.$set(a.param,"is_halt",e)},expression:"param.is_halt"}},[a._v("否")]),a._v(" "),t("el-radio",{attrs:{label:"1"},model:{value:a.param.is_halt,callback:function(e){a.$set(a.param,"is_halt",e)},expression:"param.is_halt"}},[a._v("是")])],1)]),a._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(e){a.dialogVisible_siteIncident=!1}}},[a._v("取 消")]),a._v(" "),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:a.confirmSite}},[a._v("确 定")])],1)])],1)},staticRenderFns:[]};var i=t("VU/8")(l,s,!1,function(a){t("LSoY"),t("Dt0y")},"data-v-19775f82",null);e.default=i.exports},Dt0y:function(a,e){},LSoY:function(a,e){}});